#!/usr/bin/env ruby

require 'rubygems'
require 'thor'

class Synth < Thor
	include Thor::Actions

	desc "javascripts", "Uglify and place javascripts."
	def javascripts
		files = %w[jquery jquery.facebox jquery.linkifyTags functions ready]

		javascripts = ""
		files.each do |file|
			javascripts += "js/#{file}.js "
		end

		run %Q[uglifyjs --no-copyright #{javascripts} > js/application.js]
	end

	desc "stylesheets", "Compile and compress stylesheets with Compass."
	def stylesheets
		files = %w[screen print]

		files.each do |stylesheet|
			run %Q[compass compile css/app/#{stylesheet}.scss]
		end
	end

	desc "site", "Generates the entire site, including HTML content with Jekyll."
	def site
		invoke :javascripts
		invoke :stylesheets
		run 'jekyll --config cfg/jekyll.yml'
	end
end

Synth.start
